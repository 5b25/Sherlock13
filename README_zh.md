# 🕵️ Sherlock13

本项目是基于 SDL2、SDL_ttf 和 SDL_image 开发的 **《Sherlock13》** 游戏图形化网络多人版，支持本地局域网对战、完整的 GUI 显示和交互操作。

> 🌐 支持 **4名玩家同时在线推理游戏**，每位玩家可通过不同设备运行客户端进行联机游戏。

---

## 📦 一、项目环境与依赖安装

由于项目使用了 BSD 扩展库和 POSIX 网络线程库，因此 **本项目仅适用于 Linux 环境**（如 Ubuntu）。

> ✅ 测试环境：**Ubuntu 22.04 LTS**

### 1. 安装依赖（以 Ubuntu 为例）

```bash
sudo apt update
sudo apt install build-essential libsdl2-dev libsdl2-image-dev libsdl2-ttf-dev libbsd-dev git
```

### 2. 下载项目

- **方式一：使用 git clone**

```bash
git clone https://github.com/your-username/Sherlock13.git
cd Sherlock13
```

> ⚠️ 请确保你已经安装 git（可通过 `sudo apt install git` 安装）

- **方式二：下载压缩包后手动解压**

```bash
# 下载完成后解压
unzip Sherlock13_Final_Fixed_Server.zip
cd Sherlock13_Final_Fixed_Server
```

### 3. 编译项目

在文件根目录下打开终端，运行下面的命令。

```bash
make
```

> 构建成功后将生成两个可执行文件：`serveur` 和 `client`

---

## 🚀 二、启动方式说明

### ✅ 启动服务器（`serveur`）

想要使用该程序则必须先启动服务器，服务器支持两种启动方式：

| 模式 | 命令示例 | 描述 |
|------|----------|------|
| 1️⃣  | `./serveur 40000` | 手动指定监听端口为 40000 |
| 2️⃣  | `./serveur`       | 默认监听端口为 **32000** |

---

### ✅ 启动客户端（`client`）

每位玩家需启动一个客户端，可选择命令行或图形界面启动：

| 模式 | 命令示例 | 描述 |
|------|----------|------|
| 1️⃣  | `./client 127.0.0.1 32000 Alice` | 连接服务器（IP:端口），设置用户名为 Alice |
| 2️⃣  | `./client 127.0.0.1 Alice`       | 使用默认端口 32000 |
| 3️⃣  | `./client Alice`                 | 默认 IP 为 127.0.0.1，端口 32000 |
| 4️⃣  | `./client gui 127.0.0.1 32000 Alice` | 启动图形界面客户端连接服务器 |
| 5️⃣  | `./client`                       | 推荐：默认图形界面，运行后输入用户名点击 GO |

> ⚠️ 所有客户端发送连接请求前，服务器必须已经启动。

---

## 🎮 三、使用方法与游戏规则

### 1. 游戏流程

- 每位玩家进入游戏后随机分发三张角色卡
- 系统会随机选择一张“凶手”卡藏起来，其他玩家需通过推理找出
- 游戏内通过**提问对象/玩家**和**猜测凶手**逐步排除

### 2. 图形界面说明

- **GO按钮**：点击发送用户名加入游戏
- **O按钮**（🔍）：询问某个物品是否被**任何人持有**
- **S按钮**（🎯）：指定一个玩家，询问其是否持有某个物品
- **G按钮**（💡）：直接猜测隐藏的角色卡是谁（答错将出局）
- **左上角区域**：显示当前物品图标及数量
- **左侧表格**：显示所有玩家的姓名与所持物品推测情况
- **下方状态栏**：显示当前轮到的玩家和最近回合的结果提示

### 3. 游戏规则（简要）

- 每位玩家通过询问对象与猜测逐步排除不可能的角色
- 可以询问所有玩家是否持有某物品，或询问某位玩家是否持有某物品
- 每位玩家轮流行动，可以选择 O / S / G 三个操作中的任意一个
- 猜中即胜，猜错即淘汰

> 📘 详细规则请参考随包提供的 PDF 说明书

---
